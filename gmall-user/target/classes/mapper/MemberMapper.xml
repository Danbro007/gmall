<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.danbro.gmall.user.mapper.MemberMapper">
    <resultMap id="memberVoResultMap" type="com.danbro.gmall.api.vo.MemberInfoVO">
        <id column="id" jdbcType="BIGINT" property="id"/>
       <result column="memberLevel_id" jdbcType="BIGINT" property="memberLevelId"/>
       <result column="username" jdbcType="VARCHAR" property="username"/>
       <result column="password" jdbcType="VARCHAR" property="password"/>
       <result column="nickname" jdbcType="VARCHAR" property="nickname"/>
       <result column="phone" jdbcType="VARCHAR" property="phone"/>
       <result column="status" jdbcType="INTEGER" property="status"/>
       <result column="create_time" jdbcType="DATE" property="createTime"/>
        <result column="icon" jdbcType="VARCHAR" property="icon"/>
        <result column="gender" jdbcType="INTEGER" property="gender"/>
        <result column="birthday" jdbcType="DATE" property="birthday"/>
        <result column="city" jdbcType="VARCHAR" property="city"/>
        <result column="job" jdbcType="VARCHAR" property="job"/>
        <result column="personalized_signature" jdbcType="VARCHAR" property="personalizedSignature"/>
        <result column="source_type" jdbcType="INTEGER" property="sourceType"/>
        <result column="integration" jdbcType="INTEGER" property="integration"/>
        <result column="growth" jdbcType="INTEGER" property="growth"/>
        <result column="luckey_count" jdbcType="INTEGER" property="luckeyCount"/>
        <result column="history_integration" jdbcType="INTEGER" property="historyIntegration"/>

        <association property="addressList" javaType="com.danbro.gmall.api.bean.MemberReceiveAddress">
            <id property="id" jdbcType="BIGINT" column="id"/>
            <result property="name" jdbcType="VARCHAR" column="name"/>
            <result property="phoneNumber" jdbcType="VARCHAR" column="phone_number"/>
            <result property="memberId" jdbcType="BIGINT" column="member_id"/>
            <result property="postCode" jdbcType="VARCHAR" column="post_code"/>
            <result property="province" jdbcType="VARCHAR" column="province"/>
            <result property="city" jdbcType="VARCHAR" column="city"/>
            <result property="region" jdbcType="VARCHAR" column="region"/>
            <result property="detailAddress" jdbcType="VARCHAR" column="detail_address"/>
        </association>
    </resultMap>

    <select id="selectMemberByMemberId" resultMap="memberVoResultMap">
        SELECT
            um.*,umr.*
        FROM
            ums_member um
            LEFT JOIN ums_member_receive_address umr ON um.id = umr.member_id
        WHERE
            um.id =#{memberId}
    </select>


</mapper>